<!DOCTYPE HTML>
<html>
<head>
<META charset="UTF-8">
<title>[JUI Library] - JavaScript/Table/API</title>

<link href="//rawgit.com/juijs/jui/develop/dist/ui.css" rel="stylesheet" />
<link href="//rawgit.com/juijs/jui/develop/dist/ui-jennifer.css" rel="stylesheet" />
<script src="../../dist/core.js"></script>

<script>

jui.defineUI("ui.switch", [ "util.dom", "util.base" ], function($, _) {


    /**
     * @class ui.switch
     * @extends core
     * @alias Switch button
     * @requires jquery
     * @requires util.base
     */
    var UI = function() {
        function selectDom(root, selector) {
            var $dom = $(root).find('.' + selector);

            if (!$dom.length) {
                $dom = $("<div />").addClass(selector);
            }

            return $dom;
        }

        this.init = function() {
            var self = this,
                opts = this.options;

            console.log(this);

            var $left = selectDom(this.root, "left"),
                $right = selectDom(this.root, "right"),
                $area = selectDom(this.root, "area"),
                $bar = selectDom(this.root, "bar"),
                $handle = selectDom(this.root, "handle");

            $bar.html($left),
                $bar.append($right),
                $area.html($bar);

            $(this.root).html($area).append($handle);

            this.addEvent(this.root, opts.toggleEvent, function(e) {
                self.toggle();
            });

            if(opts.checked) {
                $(this.root).addClass("on");
            }
        }

        this.getValue = function() {
            return $(this.root).hasClass("on");
        }

        this.setValue = function(value) {
            $(this.root).toggleClass("on", !!value);
            this.emit("change", [ value ]);
        }

        this.toggle = function() {
            this.setValue(!this.getValue());
        }
    };

    UI.setup = function() {
        return {
            checked: false,
            toggleEvent: "click"
        }
    }

    return UI;
});

jui.ready([ "ui.switch" ], function(s) {
    s(".switch", {
        event : {
            change : function () {
                console.log(this, 'click');
            }
        }
    });
});
</script>
</head>
<body class="jui">
    <div class="switch"></div>
    <div class="switch"></div>
    <div class="switch"></div>
    <div class="switch"></div>
</body>
</html>